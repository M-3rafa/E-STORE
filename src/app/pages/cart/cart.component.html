<div class="max-w-8xl mx-auto px-4 py-8">
    <h2 class="text-3xl font-bold mb-8 text-center text-gray-800">Your Cart</h2>

    <!-- Loading -->
    <div *ngIf="isLoading" class="text-center text-gray-500 text-lg">
        Loading...
    </div>

    <!-- Empty Cart -->
    <div *ngIf="!isLoading && cartItems.length === 0" class="text-center text-gray-600 text-xl">
        <p>Your cart is empty.</p>
    </div>

    <!-- Cart Items -->
    <div *ngIf="!isLoading && cartItems.length > 0" class="grid grid-cols-1 lg:grid-cols-3 gap-8">

        <!-- Items List -->
        <div class="lg:col-span-2 space-y-4">
            <div *ngFor="let item of cartItems"
                class="flex flex-col sm:flex-row items-center bg-white shadow rounded-lg p-4 hover:shadow-md transition">
                <img [src]="item.product.imageCover" alt="Product image"
                    class="w-28 h-28 object-cover rounded-md mb-4 sm:mb-0 sm:mr-6" />

                <div class="flex-1 w-full">
                    <h3 class="text-lg font-semibold text-gray-800">{{ item.product.title }}</h3>
                    <p class="text-gray-600 text-sm mt-1">Price: <span class="font-medium">{{ item.price }} EGP</span>
                    </p>

                    <div class="flex items-center mt-3">
                        <label class="text-sm mr-2">Quantity:</label>
                        <input type="number" min="1" [(ngModel)]="item.count"
                            (change)="updateQuantity(item.product._id, item.count)"
                            class="w-20 border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    </div>
                </div>

                <button (click)="removeProduct(item.product._id)"
                    class="mt-4 sm:mt-0 sm:ml-6 bg-red-500 hover:bg-red-600 text-white text-sm px-4 py-2 rounded shadow-sm transition">
                    Remove
                </button>
            </div>
        </div>

        <!-- Summary & Checkout -->
        <div class="bg-white shadow rounded-lg p-6 h-fit">
            <h4 class="text-xl font-semibold mb-4 border-b pb-2">Order Summary</h4>

            <div class="flex justify-between text-gray-700 mb-2">
                <span>Subtotal</span>
                <span>{{ totalPrice }} EGP</span>
            </div>

            <div class="flex justify-between text-gray-500 mb-4 text-sm">
                <span>Shipping</span>
                <span>Free</span>
            </div>

            <div class="flex justify-between font-semibold text-lg text-gray-800 border-t pt-3">
                <span>Total</span>
                <span>{{ totalPrice }} EGP</span>
            </div>

            <button [routerLink]="['/checkout',cartId ]"
                class="w-full mt-6 bg-green-600 hover:bg-green-700 text-white py-2 rounded font-medium text-lg transition">
                Proceed to Checkout
            </button>

            <button (click)="clearCart()"
                class="w-full mt-3 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded text-sm transition">
                Clear Cart
            </button>
        </div>
    </div>
</div>